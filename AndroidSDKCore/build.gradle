apply plugin: 'com.android.library'

android {
    compileSdkVersion COMPILE_SDK_VERSION
    buildToolsVersion BUILD_TOOLS_VERSION
    useLibrary 'org.apache.http.legacy'

    defaultConfig {
        consumerProguardFiles CONSUMER_PROGUARD_FILES
    }
    buildTypes {
        release {
            minifyEnabled true
            proguardFiles PROGUARD_FILES
        }
        buildTypes.each {
            def packageIdentifier = '\"' + (System.getenv("LEANPLUM_PACKAGE_IDENTIFIER") ?: "s") +
                    '\"'
            it.buildConfigField 'String', 'LEANPLUM_PACKAGE_IDENTIFIER', packageIdentifier
        }
    }
}

dependencies {
    // Compile dependencies will be added as dependency in pom file.
    api "com.android.support:support-v4:[22.0.0,${SUPPORT_LIBRARY_VERSION}]"
    api "com.android.support:appcompat-v7:[22.0.0,${SUPPORT_LIBRARY_VERSION}]"
}

ext.packageName = 'AndroidSDKCore'
ext.libraryArtifactId = 'Leanplum-core'
ext.javadocExcludes = [
        'com/leanplum/internal',
        'com/leanplum/messagetemplates',
        'com/leanplum/utils',
        'com/leanplum/views'
]
ext.javadocSource = android.sourceSets.main.java.srcDirs
ext.javadocClassPath = project.files(android.getBootClasspath().join(File.pathSeparator))
